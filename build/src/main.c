/* main.c generated by valac 0.20.1, the Vala compiler
 * generated from main.vala, do not modify */

/*
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <granite.h>

#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_option_context_free0(var) ((var == NULL) ? NULL : (var = (g_option_context_free (var), NULL)))

#define FI_TYPE_FOTO_IMPORT (fi_foto_import_get_type ())
#define FI_FOTO_IMPORT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), FI_TYPE_FOTO_IMPORT, FiFotoImport))
#define FI_FOTO_IMPORT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), FI_TYPE_FOTO_IMPORT, FiFotoImportClass))
#define FI_IS_FOTO_IMPORT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), FI_TYPE_FOTO_IMPORT))
#define FI_IS_FOTO_IMPORT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), FI_TYPE_FOTO_IMPORT))
#define FI_FOTO_IMPORT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), FI_TYPE_FOTO_IMPORT, FiFotoImportClass))

typedef struct _FiFotoImport FiFotoImport;
typedef struct _FiFotoImportClass FiFotoImportClass;
typedef struct _FiFotoImportPrivate FiFotoImportPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

struct _FiFotoImport {
	GraniteApplication parent_instance;
	FiFotoImportPrivate * priv;
	gchar* srcdir;
};

struct _FiFotoImportClass {
	GraniteApplicationClass parent_class;
};


extern gchar* _app_cmd_name;
gchar* _app_cmd_name = NULL;
extern gchar* srcdir;
gchar* srcdir = NULL;

gint _vala_main (gchar** args, int args_length1);
FiFotoImport* fi_foto_import_new (void);
FiFotoImport* fi_foto_import_construct (GType object_type);
GType fi_foto_import_get_type (void) G_GNUC_CONST;

const GOptionEntry entries[3] = {{"debug", 'd', 0, G_OPTION_ARG_NONE, NULL, "Enable debugging", NULL}, {"srcdir", 's', 0, G_OPTION_ARG_STRING, &srcdir, "Source directory", NULL}, {NULL}};

gint _vala_main (gchar** args, int args_length1) {
	gint result = 0;
	gint ret = 0;
	gchar* _tmp0_;
	GOptionContext* _tmp1_;
	GOptionContext* context;
	FiFotoImport* _tmp4_;
	FiFotoImport* app;
	const gchar* _tmp5_;
	gchar* _tmp6_;
	gchar** _tmp7_;
	gint _tmp7__length1;
	gint _tmp8_ = 0;
	GError * _inner_error_ = NULL;
	_tmp0_ = g_strdup ("FotoImport");
	_g_free0 (_app_cmd_name);
	_app_cmd_name = _tmp0_;
	_tmp1_ = g_option_context_new ("- [src directory]");
	context = _tmp1_;
	g_option_context_add_main_entries (context, entries, GETTEXT_PACKAGE);
	{
		g_option_context_parse (context, &args_length1, &args, &_inner_error_);
		if (_inner_error_ != NULL) {
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp2_;
		const gchar* _tmp3_;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp2_ = e;
		_tmp3_ = _tmp2_->message;
		g_warning ("main.vala:40: %s", _tmp3_);
		_g_error_free0 (e);
	}
	__finally0:
	if (_inner_error_ != NULL) {
		_g_option_context_free0 (context);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return 0;
	}
	gtk_init (&args_length1, &args);
	_tmp4_ = fi_foto_import_new ();
	app = _tmp4_;
	_tmp5_ = srcdir;
	_tmp6_ = g_strdup (_tmp5_);
	_g_free0 (app->srcdir);
	app->srcdir = _tmp6_;
	_tmp7_ = args;
	_tmp7__length1 = args_length1;
	_tmp8_ = granite_application_run ((GraniteApplication*) app, _tmp7_, _tmp7__length1);
	ret = _tmp8_;
	gtk_main ();
	result = ret;
	_g_object_unref0 (app);
	_g_option_context_free0 (context);
	return result;
}


int main (int argc, char ** argv) {
	g_type_init ();
	return _vala_main (argv, argc);
}



